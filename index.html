<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Turismo Jim√©nez | Viajes M√©xico - USA</title>

  <!-- Fuente profesional -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet" />

  <!-- Iconos -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />

  <!-- Leaflet Mapa -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />

  <!-- Estilos Globales -->
  <style>
    body {
      font-family: "Inter", sans-serif;
      margin: 0;
      padding: 0;
      background: #f4f1f8;
      color: #333;
    }

    :root {
      --morado-oscuro: #5b2c94;
      --morado-brillante: #8a2be2;
      --morado-suave: #9b6cc3;
      --shadow-suave: 0 4px 14px rgba(0, 0, 0, 0.15);
      --radius: 12px;
    }

    header {
      background: var(--morado-oscuro);
      color: white;
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 14px 40px;
      position: sticky;
      top: 0;
      z-index: 999;
      box-shadow: var(--shadow-suave);
    }

    header .logo {
      display: flex;
      align-items: center;
      gap: 12px;
    }

    header .logo img {
      width: 42px;
      border-radius: 6px;
    }

    header .nav-links a {
      margin: 0 12px;
      color: white;
      font-weight: 500;
      text-decoration: none;
      transition: 0.3s;
    }

    header .nav-links a:hover {
      color: var(--morado-suave);
    }

    .dark-mode-btn {
      background: var(--morado-brillante);
      padding: 8px 14px;
      border-radius: 8px;
      border: none;
      color: white;
      cursor: pointer;
      transition: 0.3s;
    }

    .dark-mode-btn:hover {
      background: var(--morado-suave);
    }

    /* =============================
       CARRUSEL
    ============================== */
    .carousel-container {
      width: 100%;
      height: 360px;
      position: relative;
      overflow: hidden;
      border-bottom-left-radius: 20px;
      border-bottom-right-radius: 20px;
    }

    .carousel {
      width: 100%;
      height: 100%;
      display: flex;
    }

    .carousel img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      display: none;
      transition: opacity 0.7s ease-in-out;
    }

    .carousel img.active {
      display: block;
      opacity: 1;
    }

    /* =============================
       BUSCADOR FLOTANTE
    ============================== */
    .buscador-flotante {
      position: absolute;
      bottom: 25px;
      left: 50%;
      transform: translateX(-50%);
      width: 85%;
      max-width: 900px;
      background: rgba(255, 255, 255, 0.92);
      padding: 18px;
      border-radius: var(--radius);
      backdrop-filter: blur(6px);
      box-shadow: var(--shadow-suave);
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      z-index: 500;
      animation: fadeIn 0.7s ease-out;
    }

    .buscador-flotante input {
      flex: 1;
      padding: 12px;
      border-radius: 8px;
      border: 1px solid #ccc;
      outline: none;
      font-size: 14px;
    }

    .buscador-flotante button {
      padding: 12px 22px;
      background: var(--morado-oscuro);
      border: none;
      color: white;
      border-radius: 10px;
      cursor: pointer;
      font-weight: 600;
      transition: 0.3s;
    }

    .buscador-flotante button:hover {
      background: var(--morado-brillante);
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateX(-50%) translateY(20px); }
      to   { opacity: 1; transform: translateX(-50%) translateY(0); }
    }
  </style>
</head>

<body>

  <!-- ============================
       HEADER
  ============================= -->
  <header>
    <div class="logo">
      <img src="img/logo.jfif" alt="Logo">
      <h2>Turismo Jim√©nez</h2>
    </div>

    <nav class="nav-links">
      <a href="promociones.html">Promociones</a>
      <a href="terminales.html">Terminales</a>
      <a href="misviajes.html">Mis Viajes</a>
      <a href="ayuda.html">Ayuda</a>
    </nav>

    <button class="dark-mode-btn" onclick="toggleDarkMode()">Modo Oscuro</button>
  </header>

  <!-- ============================
       CARRUSEL
  ============================= -->
  <div class="carousel-container">
    <div class="carousel">
      <img src="img/omexvip.jpg" class="active" alt="Viaje en autob√∫s">
      <img src="img/prevost.jfif" alt="Terminal de autobuses">
      <img src="img/volvo9800.jfif" alt="Paisaje carretera">
    </div>

    <!-- ============================
         BUSCADOR
    ============================= -->
    <div class="buscador-flotante">
      <input type="text" id="origen" placeholder="Origen (ej. Monterrey)">
      <input type="text" id="destino" placeholder="Destino (ej. Dallas)">
      <input type="date" id="fecha">
      <button onclick="buscarBoletos()">Buscar Boletos</button>
    </div>
  </div>

  <!-- ============================
       RESULTADOS (PARTE 2)
  ============================= -->
<!-- ============================
     RESULTADOS DE B√öSQUEDA
============================= -->
<div id="resultados" style="max-width: 900px; margin: 40px auto;"></div>

<!-- ============================
     MAPA INTERACTIVO
============================= -->
<div id="map" style="margin-top:30px;"></div>


<!-- ============================
     DESTINOS FAVORITOS + UBICACIONES + QR
============================= -->
<section class="container" aria-label="Destinos favoritos y contacto" style="max-width: 1000px; margin: 40px auto; padding: 10px;">
  
  <h3 style="margin-bottom:10px; color:var(--morado-oscuro)">‚úàÔ∏è Destinos Favoritos</h3>

  <div class="destinos-grid">
    <a class="destino" href="gdl.html">
      <img src="img/img1.jpg" alt="Guadalajara">
      <div class="meta"><strong>Guadalajara</strong><br><small>Cultura y tradici√≥n</small></div>
    </a>

    <a class="destino" href="sanjose.html">
      <img src="img/img7.jpg" alt="San Jose CA">
      <div class="meta"><strong>San Jos√© CA</strong><br><small>Silicon Valley</small></div>
    </a>

    <a class="destino" href="puebla.html">
      <img src="img/img8.jpg" alt="Puebla">
      <div class="meta"><strong>Puebla</strong><br><small>Gastronom√≠a</small></div>
    </a>

    <a class="destino" href="houston.html">
      <img src="img/img9.jpg" alt="Houston">
      <div class="meta"><strong>Houston TX</strong><br><small>Destino internacional</small></div>
    </a>
  </div>

  <!-- Ubicaciones -->
  <h3 style="margin-top:22px;color:var(--morado-oscuro)">üìç Nuestras ubicaciones</h3>

  <div class="mapa-contacto" style="display:grid; grid-template-columns:1fr 1fr; gap:12px; margin-top:12px">
    <iframe title="Santa Clarita CA" 
      src="https://www.google.com/maps/embed?pb=!4v1763747137586!6m8!1m7!1sHvvfjIZgXoercx5ObyPdiQ!2m2!1d34.38765999673694!2d-118.5394147229615!3f241.5498215854186!4f-4.510787931617202!5f0.7820865974627469"
      loading="lazy"></iframe>

    <iframe title="Taxque√±a CDMX"
      src="https://www.google.com/maps/embed?pb=!4v1763746872245!6m8!1m7!1sP3KD-6pmEzenvfD-1iaFtQ!2m2!1d19.34160480861707!2d-99.13992809755528!3f20.29645793834325!4f-0.08865320068684923!5f0.7820865974627469"
      loading="lazy"></iframe>
  </div>

  <!-- QR -->
  <div style="display:flex; justify-content:space-between; align-items:center; gap:20px; margin-top:20px; flex-wrap:wrap">

    <div>
      <h4 style="margin:0 0 8px 0; color:var(--morado-oscuro)">Cont√°ctanos por WhatsApp</h4>
      <a href="https://wa.me/5213312345678" target="_blank"
         style="color:var(--morado-brillante); font-weight:600">
        +52 1 33 1234 5678
      </a>
    </div>

    <div class="qr-contacto">
      <img src="img/qr.jpeg" alt="QR WhatsApp">
      <div style="font-size:13px;color:var(--texto-oscuro)">
        Escanea el c√≥digo para abrir WhatsApp
      </div>
    </div>

  </div>

</section>


<!-- ============================
     FOOTER
============================= -->
<footer style="
    margin-top: 40px;
    text-align: center;
    padding: 25px;
    background: var(--morado-oscuro);
    color: white;">
  ¬© 2025 Turismo Jim√©nez ‚Äî Todos los derechos reservados.
</footer>

<!-- ==== Leaflet (Mapa) ==== -->
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

<script>
/* ===========================================
   UTILIDADES
=========================================== */
function qs(id){ return document.getElementById(id); }
function capitalize(s){ return s.charAt(0).toUpperCase() + s.slice(1); }

/* Coordenadas ciudad ‚Üí mapa */
const cityCoords = {
  monterrey: [25.6866, -100.3161],
  guadalajara: [20.6597, -103.3496],
  puebla: [19.0413, -98.2062],
  mexico: [19.4326, -99.1332],
  cdmx: [19.4326, -99.1332],
  dallas: [32.7767, -96.7970],
  houston: [29.7604, -95.3698],
  sanjose: [37.3382, -121.8863],
};

let mapInstance = null;
let lastRutas = [];


/* ===========================================
   CARRUSEL AUTOM√ÅTICO
=========================================== */
(function(){
  const imgs = document.querySelectorAll(".carousel img");
  if (imgs.length === 0) return;

  let index = 0;
  imgs[index].classList.add("active");

  setInterval(() => {
    imgs[index].classList.remove("active");
    index = (index + 1) % imgs.length;
    imgs[index].classList.add("active");
  }, 4500);
})();


/* ===========================================
   MODO OSCURO
=========================================== */
function toggleDarkMode(){
  document.body.classList.toggle("dark-mode");
  const btn = document.querySelector(".dark-mode-btn");
  btn.textContent = document.body.classList.contains("dark-mode")
    ? "Modo Claro"
    : "Modo Oscuro";
}


/* ===========================================
   GENERAR RUTAS (Simuladas)
=========================================== */
function generarRutasSimuladas(origen, destino){
  const rutas = [
    { empresa: "Turismo Jim√©nez VIP", salida: "06:00", llegada: "14:30", duracion: "8h 30m", precio: "$1,450 MXN", asiento: "Reclinable 140¬∞" },
    { empresa: "√ìmnibus Premium", salida: "09:30", llegada: "18:10", duracion: "8h 40m", precio: "$1,380 MXN", asiento: "Ejecutivo" },
    { empresa: "Turismo Jim√©nez Primera", salida: "11:00", llegada: "19:45", duracion: "8h 45m", precio: "$1,250 MXN", asiento: "Econ√≥mico" }
  ];

  return rutas.map((r, i) => ({
    ...r,
    id: "R" + Date.now() + "_" + i,
    coords: [
      cityCoords[origen.toLowerCase()] || cityCoords.puebla,
      cityCoords[destino.toLowerCase()] || cityCoords.houston
    ]
  }));
}


/* ===========================================
   BUSCAR BOLETOS
=========================================== */
function buscarBoletos(){
  const origen = qs("origen").value.trim();
  const destino = qs("destino").value.trim();
  const fecha = qs("fecha").value;

  const div = qs("resultados");

  if (!origen || !destino || !fecha){
    div.innerHTML = `
      <div style="color:#b02a37; text-align:center; padding:14px;">
        ‚ö†Ô∏è Completa origen, destino y fecha.
      </div>`;
    return;
  }

  lastRutas = generarRutasSimuladas(origen, destino);

  div.innerHTML = `
    <h2 style="color:var(--morado-oscuro); margin-bottom:15px;">
      Resultados de ${capitalize(origen)} ‚Üí ${capitalize(destino)} ‚Äî ${fecha}
    </h2>
    <div id="lista-resultados"
         style="display:flex; flex-direction:column; gap:14px; align-items:center;">
    </div>
  `;

  const lista = qs("lista-resultados");

  lastRutas.forEach((r, i) => {
    const card = document.createElement("div");
    card.className = "result-card";
    card.style.maxWidth = "900px";
    card.style.width = "100%";
    card.style.animation = `fadeIn .3s ease ${i * 0.1}s both`;

    card.innerHTML = `
      <div style="display:flex; gap:12px; align-items:center">
        <img src="https://upload.wikimedia.org/wikipedia/commons/3/36/ADO_logo_2018.svg"
             style="width:84px; height:60px; object-fit:contain;">
        <div>
          <h3 style="margin:0">${r.empresa}</h3>
          <div style="font-size:14px; color:#555;">
            <b>Salida:</b> ${r.salida} ‚Ä¢
            <b>Llegada:</b> ${r.llegada}<br>
            <b>Duraci√≥n:</b> ${r.duracion} ‚Ä¢
            <b>Asiento:</b> ${r.asiento}
          </div>
        </div>
      </div>

      <div style="text-align:right;">
        <div class="precio">${r.precio}</div>
        <button class="comprar-btn" onclick="abrirModalCompra(${i})">Comprar</button>
      </div>
    `;

    lista.appendChild(card);
  });

  // Mapa autom√°tico con la primera ruta
  initMap(lastRutas[0].coords[0], lastRutas[0].coords[1]);
}


/* ===========================================
   MAPA LEAFLET
=========================================== */
function initMap(origen, destino){
  if (mapInstance) mapInstance.remove();

  mapInstance = L.map("map").setView([
    (origen[0] + destino[0]) / 2,
    (origen[1] + destino[1]) / 2
  ], 5);

  L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png", {
    maxZoom: 18
  }).addTo(mapInstance);

  L.marker(origen).addTo(mapInstance).bindPopup("Origen");
  L.marker(destino).addTo(mapInstance).bindPopup("Destino");

  const line = L.polyline([origen, destino], { color: "#8a2be2", weight: 5 }).addTo(mapInstance);
  mapInstance.fitBounds(line.getBounds(), { padding: [50, 50] });
}


/* ===========================================
   MODAL COMPRA
=========================================== */
function abrirModalCompra(i){
  qs("modalCompra").style.display = "flex";
  qs("modalCompra").dataset.index = i;
}

function cerrarModal(){
  qs("modalCompra").style.display = "none";
}

function confirmarCompra(){
  const i = qs("modalCompra").dataset.index;
  const ruta = lastRutas[i];

  const nombre = qs("c_nombre").value.trim();
  const correo = qs("c_correo").value.trim();
  const metodo = qs("c_pago").value;

  if (!nombre || !correo){
    alert("Completa tu nombre y correo.");
    return;
  }

  const ticket = "TCK-" + Math.random().toString(36).substring(2,10).toUpperCase();

  alert(`Pago aprobado ‚úÖ

${ruta.empresa}
${ruta.salida} ‚Üí ${ruta.llegada}
${ruta.precio}

Ticket: ${ticket}`);

  cerrarModal();
}


/* ===========================================
   CHATBOT
=========================================== */
function toggleChat(){
  const box = qs("chatbox");
  box.style.display = box.style.display === "flex" ? "none" : "flex";
}

function enviarChat(e){
  if (e.key !== "Enter") return;

  const input = qs("chatInput");
  const texto = input.value.trim();
  if (!texto) return;

  agregarMsg(texto, "user");
  input.value = "";

  let resp = "No entend√≠. Intenta: 'horarios', 'boleto', 'contacto'.";
  const t = texto.toLowerCase();

  if (t.includes("hola")) resp = "¬°Hola! ¬øC√≥mo puedo ayudarte hoy?";
  if (t.includes("boleto")) resp = "Para comprar un boleto usa el buscador superior.";
  if (t.includes("horario")) resp = "Los horarios dependen de tu ruta.";
  if (t.includes("contacto")) resp = "WhatsApp: +52 1 33 1234 5678";

  setTimeout(() => agregarMsg(resp, "bot"), 400);
}

function agregarMsg(texto, tipo){
  const box = qs("mensajesChat");
  const div = document.createElement("div");
  div.style.margin = "8px 0";
  div.style.padding = "10px";
  div.style.borderRadius = "10px";

  if (tipo === "user"){
    div.style.background = "#ded1f7";
    div.style.textAlign = "right";
  } else {
    div.style.background = "#f3eaff";
  }

  div.textContent = texto;
  box.appendChild(div);
  box.scrollTop = box.scrollHeight;
}

</script>

</body>
</html>
